<div id="TicTacToe" class="application" style="display: none;">
    <script>
        class TicTacToe{       
            static show(){
                $('#TicTacToe').show();
            }
            static hide(){
                $('#TicTacToe').hide();
            }
            static get boardMarks(){
                return  $('#TicTacToe section.buttons').map(function(idx,row){
                    return $(row).find('button').map(function(idx,button){
                        return $(button).html();
                    });                    
                });
            }
            static resetBoard(){
                $('#TicTacToe .board .buttons button').each(function(idx, el){
                    $(el).removeAttr('disabled');
                    $(el).html('&nbsp;');
                });
            }
            static winFound(marker,direction,id){
                console.log("Winner %s Found on %s#%d:",marker, direction,id);
                TicTacToe.setStatus(`${marker} won!`);
                TicTacToe.uiBoard.slideUp('fast',()=>{
                    TicTacToe.resetBoard();
                    TicTacToe.uiNewGame.slideDown('fast',()=>{                        
                    });
                });
            }
            static check(){
                var board = TicTacToe.boardMarks;
                var winFound = false;
                var marker = undefined;
                // Check each row for a win; call winFound() & return if so.
                for (var rIdx = 0; rIdx<3;rIdx++){
                    if((marker = board[rIdx][0])!="&nbsp;"){
                        for(var cIdx = 1; cIdx<3;cIdx++){
                            if(board[rIdx][cIdx]!=marker){
                                marker=undefined;
                                break;
                            }
                        }
                        if(marker){//Marker will be unset if run not continuous 
                            return TicTacToe.winFound(marker, 'row',rIdx);
                        }
                    }
                }
                // Check each column for a win;...
                for (var cIdx = 0; cIdx<3;cIdx++){
                    if((marker = board[0][cIdx])!="&nbsp;"){
                        for(var rIdx = 1; rIdx<3;rIdx++){
                            if(board[rIdx][cIdx]!=marker){
                                marker=undefined;
                                break;
                            }
                        }
                        if(marker){
                            return TicTacToe.winFound(marker,'column',cIdx);
                        }
                    }
                }
                // Check diagonals for a win:
                // What this does is kinda more complex; it technically checks each cell
                // in the 3x3 board; only one cell COULD hold a backslash diagonal; 
                // and only one could hold a forwardslash diagonal.
                // This code checks to see if each cell COULD hold either 
                // but skips all cells that can't from their position.
                for(var rIdx = 0; rIdx<3;rIdx++){
                    for(var cIdx = 0; cIdx<3;cIdx++){

                    }
                }
                console.log(board);
            }  
            static play(el){
                let col = $(el).index();
                let row = $(el).parent().index();                
                console.log('TicTacToe::play(%o)',el, col, row);
                $(el).html(TicTacToe.player);
                $(el).attr('disabled',true);
                TicTacToe.check();                
            }
            static start(el){
                TicTacToe.setStatus('Starting..');
                let picked = $(el).html();
                console.log('TicTacToe::start(%s)',picked);
                TicTacToe.player = picked[0];
                TicTacToe.uiNewGame.slideUp('fast',()=>{
                    TicTacToe.setStatus('Ready...');
                    TicTacToe.uiBoard.slideDown('fast',()=>{
                        TicTacToe.setStatus('Go!');
                    });
                });
            }
            static get uiNewGame(){
                return $('#TicTacToe  article.new');
            }
            static get uiBoard(){
                return $('#TicTacToe article.board');
            }
            static get uiStatus(){
                return $('#TicTacToe div.tui-fieldset-text');
            }
            static setStatus(text){
                TicTacToe.uiStatus.html(text);
            }
        }
    </script>
    <fieldset>
        <legend align="right">TicTacToe</legend>
        <div class="tui-fieldset-text">Pick one.</div>
        <article class="new center">
            <header>Xs or Os?</header>
            <hr/><br/>
            <button onclick="TicTacToe.start(this)">Xs</button>
            <button onclick="TicTacToe.start(this)">Os</button>
            <br/><br/><hr/>
        </article>
        <article class="board" style="display:none;">
            <section class="buttons">
                <button onclick="TicTacToe.play(this)">&nbsp;</button>
                <button onclick="TicTacToe.play(this)">&nbsp;</button>
                <button onclick="TicTacToe.play(this)">&nbsp;</button>
            </section>
            <section class="buttons">
                <button onclick="TicTacToe.play(this)">&nbsp;</button>
                <button onclick="TicTacToe.play(this)">&nbsp;</button>
                <button onclick="TicTacToe.play(this)">&nbsp;</button>
            </section>
            <section class="buttons">
                <button onclick="TicTacToe.play(this)">&nbsp;</button>
                <button onclick="TicTacToe.play(this)">&nbsp;</button>
                <button onclick="TicTacToe.play(this)">&nbsp;</button>
            </section>
        </article>
    </fieldset>
</div>